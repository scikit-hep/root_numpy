
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>root_numpy &mdash; root_numpy 2.0.4-dev documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.0.4-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="root_numpy 2.0.4-dev documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">root_numpy 2.0.4-dev documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="root-numpy">
<h1>root_numpy<a class="headerlink" href="#root-numpy" title="Permalink to this headline">¶</a></h1>
<p><strong>root_numpy</strong> is a python library for converting <a class="reference external" href="http://root.cern.ch/">ROOT</a>  TTree to <a class="reference external" href="http://numpy.scipy.org/">numpy</a> <a class="reference external" href="http://docs.scipy.org/doc/numpy/user/basics.rec.html">structure array</a> or <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.recarray.html">record array</a>. The library is written in C++ and <a class="reference external" href="http://cython.org/">Cython</a> and is much faster than PyROOT. It supports scalar, array of scalar and vector of basic types(int float double etc.).</p>
<div class="section" id="download-and-install">
<h2>Download and Install<a class="headerlink" href="#download-and-install" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><tt class="docutils literal"><span class="pre">easy_install</span> <span class="pre">root_numpy</span></tt></div></blockquote>
<p>or</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">root_numpy</span></tt></div></blockquote>
</div>
<div class="section" id="obtaining-source-code">
<h2>Obtaining Source Code<a class="headerlink" href="#obtaining-source-code" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Download it from <a class="reference external" href="http://pypi.python.org/pypi/root_numpy/">http://pypi.python.org/pypi/root_numpy/</a> or</p>
<p>Clone it from github <tt class="docutils literal"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/rootpy/root_numpy</span></tt>.</p>
<p>Then do the usual <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></tt></p>
</div></blockquote>
</div>
<div class="section" id="typical-usage">
<h2>Typical Usage<a class="headerlink" href="#typical-usage" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">root_numpy</span> <span class="kn">import</span> <span class="o">*</span>
<span class="c">#load to numpy structured array</span>
<span class="c">#treename is always optional if there is 1 tree in the file</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">root2array</span><span class="p">(</span><span class="s">&#39;a.root&#39;</span><span class="p">,</span><span class="s">&#39;treename&#39;</span><span class="p">)</span>
<span class="c">#load to numpy</span>
<span class="n">a_rec</span> <span class="o">=</span> <span class="n">root2rec</span><span class="p">(</span><span class="s">&#39;a.root&#39;</span><span class="p">,</span><span class="s">&#39;treename&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="module-root_numpy.root_numpy">
<span id="full-documentation"></span><h1>Full Documentation<a class="headerlink" href="#module-root_numpy.root_numpy" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="root_numpy.root_numpy.root2array">
<tt class="descname">root2array</tt><big>(</big><em>fnames</em>, <em>treename=None</em>, <em>branches=None</em>, <em>entries=None</em>, <em>offset=0</em><big>)</big><a class="reference internal" href="_modules/root_numpy/root_numpy.html#root2array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_numpy.root_numpy.root2array" title="Permalink to this definition">¶</a></dt>
<dd><p>convert tree <em>treename</em> in root files specified in <em>fnames</em> to
numpy structured array. Type conversion table
is given <a class="reference internal" href="#conversion-table"><em>here</em></a></p>
<p>Arguments:</p>
<blockquote>
<div><p><em>fnames</em>: Root file name pattern. Wildcard is also supported by
Python glob (not ROOT semi-broken wildcard)
fnames can be string or list of string.</p>
<p><em>treename</em>: name of tree to convert to numpy array.
This is optional if the file contains exactly 1 tree.</p>
<p><em>branches (optional)</em>: list of string for branch name to be
extracted from tree.</p>
<ul class="simple">
<li>If branches is not specified or is None or is empty,
all from the first treebranches are extracted</li>
<li>If branches contains duplicate branches, only the first one is used.</li>
</ul>
<p><em>entries (optional)</em>: maximum number of data that it should load
useful for testing out stuff</p>
<p><em>offset (optional)</em>: start index (first one is 0)</p>
</div></blockquote>
<p><strong>Example</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># read all branches from tree named mytree from a.root</span>
<span class="c"># remember that &#39;mytree&#39; is optional if a.root has 1 tree</span>
<span class="n">root2array</span><span class="p">(</span><span class="s">&#39;a.root&#39;</span><span class="p">,</span> <span class="s">&#39;mytree&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># read all branches starting from record 5 for 10 records</span>
<span class="c"># or the end of file.</span>
<span class="n">root2array</span><span class="p">(</span><span class="s">&#39;a.root&#39;</span><span class="p">,</span> <span class="s">&#39;mytree&#39;</span><span class="p">,</span> <span class="n">entries</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># read all branches from tree named mytree from a*.root</span>
<span class="n">root2array</span><span class="p">(</span><span class="s">&#39;a*.root&#39;</span><span class="p">,</span> <span class="s">&#39;mytree&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># read all branches from tree named mytree from a*.root and b*.root</span>
<span class="n">root2array</span><span class="p">([</span><span class="s">&#39;a*.root&#39;</span><span class="p">,</span> <span class="s">&#39;b*.root&#39;</span><span class="p">],</span> <span class="s">&#39;mytree&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># read branch x and y from tree named mytree from a.root</span>
<span class="n">root2array</span><span class="p">(</span><span class="s">&#39;a.root&#39;</span><span class="p">,</span> <span class="s">&#39;mytree&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Due to
the way TChain works, if the trees specified
in the input files have different structures, only the
branch in the first tree will be automatically extracted.
You can work around this by either reordering the input
file or specifying the branches manually.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="root_numpy.root_numpy.root2rec">
<tt class="descname">root2rec</tt><big>(</big><em>fnames</em>, <em>treename=None</em>, <em>branches=None</em>, <em>entries=None</em>, <em>offset=0</em><big>)</big><a class="reference internal" href="_modules/root_numpy/root_numpy.html#root2rec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_numpy.root_numpy.root2rec" title="Permalink to this definition">¶</a></dt>
<dd><p>read branches in tree treename in file(s) given by fnames can
convert it to numpy recarray</p>
<p>This is equivalent to
root2array(fnames, treename, branches).view(np.recarray)</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#root_numpy.root_numpy.root2array" title="root_numpy.root_numpy.root2array"><tt class="xref py py-func docutils literal"><span class="pre">root2array()</span></tt></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="root_numpy.root_numpy.list_trees">
<tt class="descname">list_trees</tt><big>(</big><em>fname</em><big>)</big><a class="reference internal" href="_modules/root_numpy/root_numpy.html#list_trees"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_numpy.root_numpy.list_trees" title="Permalink to this definition">¶</a></dt>
<dd><p>list trees in rootfile <em>fname</em></p>
</dd></dl>

<dl class="function">
<dt id="root_numpy.root_numpy.list_branches">
<tt class="descname">list_branches</tt><big>(</big><em>fname</em>, <em>treename=None</em><big>)</big><a class="reference internal" href="_modules/root_numpy/root_numpy.html#list_branches"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_numpy.root_numpy.list_branches" title="Permalink to this definition">¶</a></dt>
<dd><p>get a list of branches for given <em>fname</em> and <em>treename</em>.
<em>treename</em> is optional if fname has only one tree</p>
</dd></dl>

<dl class="function">
<dt id="root_numpy.root_numpy.lt">
<tt class="descname">lt</tt><big>(</big><em>fname</em><big>)</big><a class="reference internal" href="_modules/root_numpy/root_numpy.html#lt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_numpy.root_numpy.lt" title="Permalink to this definition">¶</a></dt>
<dd><p>shorthand for <a class="reference internal" href="#root_numpy.root_numpy.list_trees" title="root_numpy.root_numpy.list_trees"><tt class="xref py py-func docutils literal"><span class="pre">list_trees()</span></tt></a></p>
</dd></dl>

<dl class="function">
<dt id="root_numpy.root_numpy.lst">
<tt class="descname">lst</tt><big>(</big><em>fname</em>, <em>treename=None</em><big>)</big><a class="reference internal" href="_modules/root_numpy/root_numpy.html#lst"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_numpy.root_numpy.lst" title="Permalink to this definition">¶</a></dt>
<dd><p>return tree structures.
<em>treename</em> is optional if fname has only one tree</p>
</dd></dl>

<dl class="function">
<dt id="root_numpy.root_numpy.lb">
<tt class="descname">lb</tt><big>(</big><em>fname</em>, <em>treename=None</em><big>)</big><a class="reference internal" href="_modules/root_numpy/root_numpy.html#lb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_numpy.root_numpy.lb" title="Permalink to this definition">¶</a></dt>
<dd><p>shorthand for <a class="reference internal" href="#root_numpy.root_numpy.list_branches" title="root_numpy.root_numpy.list_branches"><tt class="xref py py-func docutils literal"><span class="pre">list_branches()</span></tt></a></p>
</dd></dl>

<dl class="function">
<dt id="root_numpy.root_numpy.tree2array">
<tt class="descname">tree2array</tt><big>(</big><em>tree</em>, <em>branches=None</em>, <em>entries=None</em>, <em>offset=0</em>, <em>include_weight=False</em>, <em>weight_name='weight'</em>, <em>weight_dtype='f4'</em><big>)</big><a class="reference internal" href="_modules/root_numpy/root_numpy.html#tree2array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_numpy.root_numpy.tree2array" title="Permalink to this definition">¶</a></dt>
<dd><p>convert PyROOT TTree <em>tree</em> to numpy structured array
see <a class="reference internal" href="#root_numpy.root_numpy.root2array" title="root_numpy.root_numpy.root2array"><tt class="xref py py-func docutils literal"><span class="pre">root2array()</span></tt></a> for details on parameter</p>
</dd></dl>

<dl class="function">
<dt id="root_numpy.root_numpy.tree2rec">
<tt class="descname">tree2rec</tt><big>(</big><em>tree</em>, <em>branches=None</em>, <em>entries=None</em>, <em>offset=0</em>, <em>include_weight=False</em>, <em>weight_name='weight'</em>, <em>weight_dtype='f4'</em><big>)</big><a class="reference internal" href="_modules/root_numpy/root_numpy.html#tree2rec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_numpy.root_numpy.tree2rec" title="Permalink to this definition">¶</a></dt>
<dd><p>convert PyROOT TTree <em>tree</em> to numpy structured array
see <a class="reference internal" href="#root_numpy.root_numpy.root2array" title="root_numpy.root_numpy.root2array"><tt class="xref py py-func docutils literal"><span class="pre">root2array()</span></tt></a> for details on parameters.</p>
</dd></dl>

<dl class="function">
<dt id="root_numpy.root_numpy.fill_array">
<tt class="descname">fill_array</tt><big>(</big><em>hist</em>, <em>array</em>, <em>weights=None</em><big>)</big><a class="reference internal" href="_modules/root_numpy/root_numpy.html#fill_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_numpy.root_numpy.fill_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill a ROOT histogram with a NumPy array</p>
</dd></dl>

<span class="target" id="module-root_numpy.nputil"></span><dl class="function">
<dt id="root_numpy.nputil.stretch">
<tt class="descname">stretch</tt><big>(</big><em>arr</em>, <em>col_names</em>, <em>asrecarray=True</em><big>)</big><a class="reference internal" href="_modules/root_numpy/nputil.html#stretch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_numpy.nputil.stretch" title="Permalink to this definition">¶</a></dt>
<dd><p>Stretch array. hstack multiple array fields and preserving
column names and rec array structure. If scalar field is specified,
it&#8217;s stretched along with array field.</p>
<p><strong>Arguments*</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>arr</strong> numpy structured array or recarray</li>
<li><strong>colnames</strong> list of column names to stretch</li>
<li><strong>asrecarray</strong> optional boolean. If <cite>True</cite> return recarray,
<cite>False</cite> returns structured array. Default <cite>True</cite></li>
</ul>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="type-conversion-table">
<span id="conversion-table"></span><h1>Type Conversion Table<a class="headerlink" href="#type-conversion-table" title="Permalink to this headline">¶</a></h1>
<p>List of primitive type converion is given this table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ROOT type</th>
<th class="head">numpy type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Char_t</td>
<td>np.int8</td>
</tr>
<tr class="row-odd"><td>UChar_t</td>
<td>np.uint8</td>
</tr>
<tr class="row-even"><td>Short_t</td>
<td>np.int16</td>
</tr>
<tr class="row-odd"><td>UShort_t</td>
<td>np.uint16</td>
</tr>
<tr class="row-even"><td>Int_t</td>
<td>np.int32</td>
</tr>
<tr class="row-odd"><td>UInt_t</td>
<td>np.uint32</td>
</tr>
<tr class="row-even"><td>Float_t</td>
<td>np.float32</td>
</tr>
<tr class="row-odd"><td>Double_t</td>
<td>np.float64</td>
</tr>
<tr class="row-even"><td>Long64_t</td>
<td>np.int64</td>
</tr>
<tr class="row-odd"><td>ULong64_t</td>
<td>np.uint64</td>
</tr>
<tr class="row-even"><td>Bool_t</td>
<td>np.bool</td>
</tr>
<tr class="row-odd"><td>x[10]</td>
<td>(np.primitivetype, (10,))</td>
</tr>
<tr class="row-even"><td>x[nx]</td>
<td>np.object</td>
</tr>
<tr class="row-odd"><td>vector&lt;t&gt;</td>
<td>np.object</td>
</tr>
</tbody>
</table>
<p>Variable length array (<cite>particletype[nparticle]</cite>) and vector (<cite>vector&lt;int&gt;</cite>)
are converted to object of numpy array of corresponding types. Fixed length
array is converted to fixed length array field in numpy.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">root_numpy</a><ul>
<li><a class="reference internal" href="#download-and-install">Download and Install</a></li>
<li><a class="reference internal" href="#obtaining-source-code">Obtaining Source Code</a></li>
<li><a class="reference internal" href="#typical-usage">Typical Usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-root_numpy.root_numpy">Full Documentation</a></li>
<li><a class="reference internal" href="#type-conversion-table">Type Conversion Table</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">root_numpy 2.0.4-dev documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, rootpy developers and contributors.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>